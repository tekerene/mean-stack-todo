<!--/*
    *@Description: Create Todo Component
    *@Date-created: sep 14 2020
    *@Author: Teke Rene
 -->

<div class="create-todo">
    <form [formGroup]='todoForm' (ngSubmit)="onSubmit()" enctype="multipart/form-data" autocomplete="off">
        <div class="form-group">
            <label for="title"></label>
            <input type="text" maxlength="100" [(ngModel)]="selectedTodo.title" (keyup)="wordCount($event)" name="title" formControlName="title" class="form-control" id="title" placeholder="Title" required>
            <span class="max-desc">{{inputVal}}/100max</span>
            <div class="invalid-feedback" *ngIf="submitted && todoForm.value.title.errors?.required">
                Title is required.
              </div>
        </div>
        <div class="form-group">
            <label for="desc"></label>
            <textarea name="desc" maxlength="280" [(ngModel)]="selectedTodo.desc" (keyup)="textCount($event)" id="desc" formControlName="desc" class="form-control" cols="" rows="6" placeholder="Description" required></textarea>
            <span class="max-desc">{{textVal}}/280max</span>
            <div class="invalid-feedback" *ngIf="submitted && todoForm.value.desc.errors?.required">
                Description is required.
              </div>
        </div>
        
       
        <div class="custom-file mb-3">
            <div class="form-group">
                <label for="imageUrl"></label>
                <input type="file" name="imageUrl" [(ngModel)]="selectedTodo.imageUrl" formControlName="imageUrl" (change)="imageUpload($event)" class="custom-file-input" id="imageUrl" required>
                <label class="custom-file-label">Choose file...</label>
                <div class="invalid-feedback"></div>
            </div>
            <div class="form-group">
                <label for="author"></label>
                <input type="text" name="author" [(ngModel)]="selectedTodo.author" formControlName="author" placeholder="Author" class="form-control">
            </div>
            <div class="d-flex">
                <div class="form-group dateTime">
                    <input type="datetime-local"
                    [(ngModel)]="selected" 
                    [(ngModel)]="selectedTodo.startDate"
                     class="datePicker form-control"
                     formControlName="startDate" 
                     placeholder="startDate"
                    id="startDate">
                </div>
                <!-- <div class="form-group dateTime">
                    <input type="datetime"
                    [singleDatePicker]="true"
                    [timePicker]="true"
                    [timePickerSeconds]="true"
                    [timePickerIncrement]="15"
                    [timePicker24Hour]="true"
                    [locale]="locale"
                    [locale]="{format: 'YYYY-Do-MMM  h:m', firstDay: 0}"                      
                    [(ngModel)]="selected"
                    formControlName="endDate" 
                    id="endDate"
                    placeholder="endDate"
                    class="form-control"/>
                </div> -->
                 <button *ngIf="showData; else update" type="submit" class="btn-lg">Add</button>
                 <ng-template #update>
                       <button (click)="updateTodoData()" type="button">edit</button>
                 </ng-template>
                 
               
            </div>
        </div>
    </form>
</div>
